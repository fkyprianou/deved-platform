<?xml version="1.0" encoding="utf-8" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 20010904//EN" "http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd"><svg xmlns="http://www.w3.org/2000/svg" width="867" height="661" xmlns:xlink="http://www.w3.org/1999/xlink"><source><![CDATA[Participant User as User
Participant Web UI as UI
Participant Node.JS App as Node
Participant Nexmo as Nexmo
Participant Facebook as FB
Participant Santa API as Santa

User->UI: Click "Subscribe" \nFacebook Messenger\n button
UI->FB: Facebook \nMessenger \nSubscribe
FB->Node: "opt_in" \nwebhook
Node->Node: Save \nsubscription

Note over Node,Nexmo: Send \nsubscription \nconfirmation
Node->Nexmo: Send message \nvia Dispatch API
Nexmo->FB: Send message
FB->User: Subscription \nconfirmed\nmessage]]></source><desc></desc><defs><marker viewBox="0 0 5 5" markerWidth="5" markerHeight="5" orient="auto" refX="5" refY="2.5" id="markerArrowBlock"><path d="M 0 0 L 5 2.5 L 0 5 z"></path></marker><marker viewBox="0 0 9.6 16" markerWidth="4" markerHeight="16" orient="auto" refX="9.6" refY="8" id="markerArrowOpen"><path d="M 9.6,8 1.92,16 0,13.7 5.76,8 0,2.286 1.92,0 9.6,8 z"></path></marker></defs><g class="title"></g><g class="actor"><rect x="10" y="20" width="58.40625" height="38" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="20" y="44.5" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="20">User</tspan></text></g><g class="actor"><rect x="10" y="603.125" width="58.40625" height="38" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="20" y="627.625" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="20">User</tspan></text></g><line x1="39.203125" x2="39.203125" y1="58" y2="603.125" stroke="#000000" fill="none" style="stroke-width: 2;"></line><g class="actor"><rect x="193.2265625" y="20" width="77.609375" height="38" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="203.2265625" y="44.5" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="203.2265625">Web UI</tspan></text></g><g class="actor"><rect x="193.2265625" y="603.125" width="77.609375" height="38" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="203.2265625" y="627.625" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="203.2265625">Web UI</tspan></text></g><line x1="232.03125" x2="232.03125" y1="58" y2="603.125" stroke="#000000" fill="none" style="stroke-width: 2;"></line><g class="actor"><rect x="290.8359375" y="20" width="125.609375" height="38" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="300.8359375" y="44.5" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="300.8359375">Node.JS App</tspan></text></g><g class="actor"><rect x="290.8359375" y="603.125" width="125.609375" height="38" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="300.8359375" y="627.625" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="300.8359375">Node.JS App</tspan></text></g><line x1="353.640625" x2="353.640625" y1="58" y2="603.125" stroke="#000000" fill="none" style="stroke-width: 2;"></line><g class="actor"><rect x="493.265625" y="20" width="68" height="38" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="503.265625" y="44.5" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="503.265625">Nexmo</tspan></text></g><g class="actor"><rect x="493.265625" y="603.125" width="68" height="38" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="503.265625" y="627.625" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="503.265625">Nexmo</tspan></text></g><line x1="527.265625" x2="527.265625" y1="58" y2="603.125" stroke="#000000" fill="none" style="stroke-width: 2;"></line><g class="actor"><rect x="614.078125" y="20" width="96.8125" height="38" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="624.078125" y="44.5" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="624.078125">Facebook</tspan></text></g><g class="actor"><rect x="614.078125" y="603.125" width="96.8125" height="38" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="624.078125" y="627.625" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="624.078125">Facebook</tspan></text></g><line x1="662.484375" x2="662.484375" y1="58" y2="603.125" stroke="#000000" fill="none" style="stroke-width: 2;"></line><g class="actor"><rect x="730.890625" y="20" width="106.40625" height="38" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="740.890625" y="44.5" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="740.890625">Santa API</tspan></text></g><g class="actor"><rect x="730.890625" y="603.125" width="106.40625" height="38" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="740.890625" y="627.625" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="740.890625">Santa API</tspan></text></g><line x1="784.09375" x2="784.09375" y1="58" y2="603.125" stroke="#000000" fill="none" style="stroke-width: 2;"></line><g class="signal"><text x="49.203125" y="69.3046875" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="49.203125">Click "Subscribe"</tspan><tspan dy="1.2em" x="49.203125">Facebook Messenger</tspan><tspan dy="1.2em" x="49.203125">button</tspan></text><line x1="39.203125" x2="232.03125" y1="134.390625" y2="134.390625" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="signal"><text x="404.0546875" y="145.6953125" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="404.0546875">Facebook</tspan><tspan dy="1.2em" x="404.0546875">Messenger</tspan><tspan dy="1.2em" x="404.0546875">Subscribe</tspan></text><line x1="232.03125" x2="662.484375" y1="210.78125" y2="210.78125" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="signal"><text x="469.65625" y="231.6875" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="469.65625">"opt_in"</tspan><tspan dy="1.2em" x="469.65625">webhook</tspan></text><line x1="662.484375" x2="353.640625" y1="267.96875" y2="267.96875" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="signal"><text x="378.640625" y="311.5625" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="378.640625">Save</tspan><tspan dy="1.2em" x="378.640625">subscription</tspan></text><line x1="353.640625" x2="373.640625" y1="287.96875" y2="287.96875" stroke="#000000" fill="none" style="stroke-width: 2;"></line><line x1="373.640625" x2="373.640625" y1="287.96875" y2="330.15625" stroke="#000000" fill="none" style="stroke-width: 2;"></line><line x1="373.640625" x2="353.640625" y1="330.15625" y2="330.15625" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="note"><rect x="343.640625" y="345.15625" width="193.625" height="66.390625" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="348.640625" y="364.65625" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="348.640625">Send</tspan><tspan dy="1.2em" x="348.640625">subscription</tspan><tspan dy="1.2em" x="348.640625">confirmation</tspan></text></g><g class="signal"><text x="363.640625" y="432.453125" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="363.640625">Send message</tspan><tspan dy="1.2em" x="363.640625">via Dispatch API</tspan></text><line x1="353.640625" x2="527.265625" y1="468.734375" y2="468.734375" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="signal"><text x="537.265625" y="499.234375" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="537.265625">Send message</tspan></text><line x1="527.265625" x2="662.484375" y1="506.734375" y2="506.734375" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="signal"><text x="293.234375" y="518.0390625" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="293.234375">Subscription</tspan><tspan dy="1.2em" x="293.234375">confirmed</tspan><tspan dy="1.2em" x="293.234375">message</tspan></text><line x1="662.484375" x2="39.203125" y1="583.125" y2="583.125" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g></svg>