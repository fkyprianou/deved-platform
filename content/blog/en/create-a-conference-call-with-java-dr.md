---
title: How to Create a Conference Call with Java
description: Planning a party with a group of friends? Creating a conference
  call with Java can help connect you to multiple people at the same time.
thumbnail: /content/blog/create-a-conference-call-with-java-dr/conference-call-java-feature.png
author: cr0wst
published: true
published_at: 2019-08-23T08:33:03.000Z
updated_at: 2021-05-10T13:50:43.897Z
category: tutorial
tags:
  - java
  - voice-api
comments: true
redirect: ""
canonical: ""
---
In this tutorial, you will learn how to initiate a conference call to connect multiple people who phone into a number. The example code is [on GitHub](https://github.com/nexmo-community/java-conference-call).

Previously, we've shown you how to [Receive a Phone Call](https://www.nexmo.com/blog/2018/08/09/receive-a-phone-call-with-java-dr) and [Forward a Phone Call](https://www.nexmo.com/blog/2019/04/10/forward-phone-call-voice-proxy-java-dr) so if you're not already familiar with those concepts, read those posts first.

## Prerequisites

You will be using [Gradle](https://gradle.org/) to manage your dependencies and run your application. Additionally, you'll need to make sure you have a copy of the JDK installed. I will be using JDK 11 in this tutorial, but anything JDK 8 and higher should work.

Finally, you'll need the [Nexmo CLI](https://github.com/Nexmo/nexmo-cli) installed. You'll use it to purchase a phone number and configure your Nexmo account to point at your new application.

<sign-up number></sign-up>

## Create a Conference Call With Java

This tutorial will walk you through the following steps:

1. Using Gradle to set up a new Java project.
2. Using the [Spark](http://sparkjava.com/) framework for controlling the call.
3. Purchasing a number and configuring your Nexmo account to use that number with your application.

### Using Gradle to Setup a New Java Project

You will use Gradle to manage your dependencies and to create and run your Java application.

The `gradle init --type=java-application` command will create all of the folders you will need as well as a sample class where you will be writing your code.

From the command line, create a new Java project with the following commands, accepting any of the default prompts from Gradle:

```bash
mkdir conference-call
cd conference-call
gradle init --type=java-application
```

Gradle will create the `App` class in the `src/main/java/conference/call` folder. 

Inside of this class is a `getGreeting` and `main` method. You wonâ€™t need the `getGreeting` method, so feel free to remove it.

Your `App` class should look like this:

```java
/*
 * This Java source file was generated by the Gradle 'init' task.
 */
package conference.call;

public class App {
    public static void main(String[] args) {
        // Future Code Goes Here
    }
}
```

### Using the Spark Framework for Controlling the Call

You will use the Spark framework to receive an HTTP call made by Nexmo when your number gets a call.

#### Adding the Dependencies

Add the following to the `dependencies` block in your `build.gradle` file:

```groovy
// Spark Framework
implementation "com.sparkjava:spark-core:2.8.0"

// Nexmo Java Client
implementation "com.nexmo:client:5.1.0"
```

Your `dependencies` block should look like this:

```groovy
dependencies {
    implementation "com.sparkjava:spark-core:2.8.0"
    implementation "com.nexmo:client:5.1.0"
 
    // Use JUnit test framework
    testImplementation 'junit:junit:4.12'
}
```

#### Define the Answer Route

When a call is received, Nexmo will send a request to a pre-defined webhook URL. It expects to receive a [Nexmo Call Control Object (NCCO)](https://developer.nexmo.com/voice/voice-api/ncco-reference) containing a list of actions to execute.

You will be using the `talk` action to greet the incoming caller, and the `conversation` action to connect incoming calls to a conference. 

This is the resulting NCCO that your application will create:

```json
[
  {
    "text": "You will now be added to the conference call.",
    "action": "talk"
  },
  {
    "name": "team-meeting",
    "action": "conversation"
  }
]
```

You will use the `TalkAction` and `ConversationAction` classes from the Nexmo Java Server SDK for building the above NCCO.

Add the following code to the `main` method:

```java
TalkAction talk = TalkAction.builder("You will now be added to the conference call.")
        .build();
ConversationAction conversation = ConversationAction.builder("team-meeting")
        .build();

Ncco ncco = new Ncco(talk, conversation);
```

Now that you have defined the NCCO, you will configure Spark to serve the NCCO. Your application will listen on port `3000` and the route will be `/webhooks/answer`.

Add the following to the `main` method:

```java
port(3000);
get("/webhooks/answer", (req, res) -> {
    res.type("application/json");
    return ncco.toJson();
});
```

The `main` method will now look like this:

```java
public static void main(String[] args) {
    TalkAction talk = TalkAction.builder("You will now be added to the conference call.")
        .build();
    ConversationAction conversation = ConversationAction.builder("team-meeting")
        .build();

    Ncco ncco = new Ncco(talk, conversation);

    port(3000);
    get("/webhooks/answer", (req, res) -> {
        res.type("application/json");
        return ncco.toJson();
    });
}
```

### Purchasing a Number

You will need a Nexmo number to receive phone calls. If you do not have a number, you can use the Nexmo CLI to purchase one:

```bash
nexmo number:buy --country_code US
```

Take note of the number that is assigned to you. You will need this number to link your application and for testing.

### Exposing Your Application

To send an HTTP request to your application, Nexmo needs to know the URL that your application is running on.

Instead of configuring your local network or hosting your application on an external service, you can use [ngrok](https://ngrok.com/) to expose your application to the internet safely.

Download ngrok and run the following command:

```bash
ngrok http 3000
```

Take note of the forwarding address as you will need it when you configure your account. In the following picture, the forwarding address is `http://99cad2de.ngrok.io`.

![Screenshot of ngrok running in a terminal with forwarding address http://99cad2de.ngrok.io](https://www.nexmo.com/wp-content/uploads/2018/08/ngrok.png "ngrok running in a terminal")

### Configure Your Nexmo Account

If you do not have an application you can use the Nexmo CLI to create one using your ngrok forwarding address:

```bash
nexmo app:create "Conference Call Demo" http://your-ngrok-forwarding-address/webhooks/answer http://your-ngrok-forwarding-address/webhooks/events --keyfile private.key
```

After running this command, you will be shown an application id. For example: `notreal-1111-2222-3333-appid`. You will need this application id to link your phone number to the application.

You can use the Nexmo CLI to link your phone number and application:

```bash
nexmo link:app your-nexmo-phone-number your-application-id
```

### Test Your Application

Start your application with the `gradle run` command inside of your `conference-call` directory.

Call your Nexmo number and grab a friend, colleague, or another phone to do the same. Every new caller is entered into the conference call.

## Conclusion

In a few lines of code, you have created an application that can create conference calls with multiple people.

Check out our documentation on [Nexmo Developer](https://developer.nexmo.com) where you can learn more about [call flow](https://developer.nexmo.com/voice/voice-api/guides/call-flow) or [Nexmo Call Control Objects](https://developer.nexmo.com/voice/voice-api/ncco-reference).

You can also take a look at the [Conference Call](https://developer.nexmo.com/voice/voice-api/code-snippets/connect-callers-into-a-conference/java) code snippet for this example and more.